<div class="history-container">
        
    <div class="history-header">
        <h3>Hist√≥rico do Colaborador</h3>
    </div>
    
    <div class="history-columns">
        
        <div class="history-col">
            <h4>üéì Treinamentos ({{ total_hours }}h)</h4>
            <div class="history-scroll">
                <ul class="history-list">
                    {% for t in trainings %}
                        <li class="history-item">
                            <strong>{{ t.training_date|date:"d/m/Y" }}</strong><br>
                            {{ t.training_name }} 
                            <span style="display:inline-block; background:#eef2ff; color:#4f46e5; padding:2px 8px; border-radius:4px; font-size:0.85em; font-weight:bold; margin-left:5px;">
                                {{ t.training_duration }}h
                            </span>
                        </li>
                    {% empty %}
                        <li class="history-empty">Nenhum treinamento realizado.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="history-col">
            <h4>üíº Evolu√ß√£o Profissional</h4>
            <div class="history-scroll">
                <ul class="history-list">
                    {% for h in history_log %}
                        <li class="history-item" style="position: relative;">
                            
                            <button type="button" 
                                    onclick="openDeleteModal('{% url 'rhcontrol:history_delete' pk=h.pk %}')"
                                    style="position: absolute; top: 10px; right: 10px; border: none; background: none; color: #dc3545; cursor: pointer; font-size: 1.2rem;">
                                <i class="fa fa-times"></i>
                            </button>

                            <div style="font-size: 1.4rem; font-weight: 800; color: #6c757d; margin-bottom: 8px; letter-spacing: 0.5px;">
                                {{ h.date_changed|date:"d F Y"|upper }}
                            </div>

                            {% if h.reason %}
                                <div style="margin-bottom: 12px;">
                                    <span style="display:inline-block; background:#e9ecef; color: #495057; padding: 6px 12px; border-radius: 6px; font-size: 1.2rem; font-weight: 700;">
                                        {{ h.reason }}
                                    </span>
                                </div>
                            {% endif %}

                            {% if h.new_job_title %}
                                <div style="margin-bottom: 6px; font-size: 1.6rem;">
                                    Cargo: 
                                    {% if h.old_job_title and h.old_job_title != "None" %}
                                        <span style="color:#666;">{{ h.old_job_title }}</span> 
                                        <i class="fa fa-arrow-right" style="font-size: 0.8em; margin: 0 5px; color: #adb5bd;"></i>
                                    {% endif %}
                                    <strong style="color: #0d6efd;">{{ h.new_job_title }}</strong>
                                </div>
                            {% endif %}

                            {% if h.new_salary %}
                                <div style="font-size: 1.6rem;">
                                    Sal√°rio: 
                                    {% if h.old_salary %}
                                        <span style="color:#666;">R$ {{ h.old_salary|floatformat:2 }}</span> 
                                        <i class="fa fa-arrow-right" style="font-size: 0.8em; margin: 0 5px; color: #adb5bd;"></i>
                                    {% endif %}
                                    <strong style="color:#198754;">R$ {{ h.new_salary|floatformat:2 }}</strong>
                                </div>
                            {% endif %}
                            
                            {% if h.new_cipa_role %}
                                <div style="margin-top: 6px; font-size: 1.4rem; background-color: #f8f9fa; padding: 5px; border-radius: 4px;">
                                    CIPA: 
                                    {% if h.old_cipa_role %}
                                        <span style="color:#666;">{{ h.old_cipa_role }}</span> 
                                        <i class="fa fa-arrow-right" style="font-size: 0.8em; margin: 0 5px; color: #adb5bd;"></i>
                                    {% endif %}
                                    <strong style="color:#fd7e14;">{{ h.new_cipa_role }}</strong>
                                </div>
                            {% endif %}

                        </li>
                    {% empty %}
                        <li class="history-empty" style="padding: 20px; text-align: center; color: #999;">
                            Nenhuma altera√ß√£o registrada.
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="history-col">
            <h4>üèñÔ∏è Hist√≥rico de F√©rias</h4>
            <div class="history-scroll">
                <ul class="history-list">
                    {% for v in vacations %}
                        <li class="history-item">
                            <strong>{{ v.start_date|date:"d/m/Y" }}</strong> at√© <strong>{{ v.end_date|date:"d/m/Y" }}</strong>
                            <br>
                            <span style="color: #6c757d; font-size: 0.95em;">Dura√ß√£o: {{ v.vacation_duration }} dias</span>
                        </li>
                    {% empty %}
                        <li class="history-empty">Nenhuma f√©rias registrada.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

    </div>
</div>